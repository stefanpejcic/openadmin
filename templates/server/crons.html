{% extends 'base.html' %}

{% block content %}
        
<!-- Page header -->
<div class="page-header mt-0 d-print-none">
	<div class="container-xl">
		<div class="row g-2 align-items-center">
			<div class="col">
				<!-- Page pre-title -->
				<div class="page-pretitle">
                  Server Configuration
                </div>
				<h2 class="page-title">
                  OpenPanel Cron Jobs
                </h2>
			</div>
			<!-- Page title actions -->
			<div class="col-auto ms-auto d-print-none">
				<form method="POST" action="/server/crons">
				    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
					<button type="submit" class="btn btn-primary">Update</button>
				</div>
			</div>
		</div>
	</div>
	<div class="page-body">
		<div class="container-xl">
			<div class="row row-deck row-cards">
				<div class="col-lg-12">
					<div class="card">
						<div class="card-body">
							<div class="row">
								<div class="col-lg-12">
									<p class="d-none d-sm-inline">Here you can view scheduled crons for OpenAdmin and edit their schedule or enable/disable logging to 
										<a href="/services/logs">/etc/openpanel/openadmin/cron.log</a> file.
									</p>
									<div id="table-default" class="table-responsive">
										<table class="table table-vcenter card-table table-striped">
											<thead>
												<tr>
													<th>Schedule</th>
													<th class="w-50">Command</th>
													<th class="w-1 pe-0 text-center" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-original-title="Enable logging to /etc/openpanel/openadmin/cron.log">Logging</th>
												</tr>
											</thead>
											<tbody class="table-tbody">
                              {% for cron, details in cron_jobs.items() %}
                          
												<tr>
													<td>
														<input type="text" class="form-control" id="{{ cron }}_time" name="{{ cron }}_time" value="{{ ' '.join(details['time']) }}">
														</td>
														<td>
															<input type="text" class="form-control disabled" id="{{ cron }}_command" name="{{ cron }}_command" value="{{ cron }}" disabled>
															</td>
															<td>
																<label class="form-check form-check-single form-switch">
																	<input class="form-check-input" type="checkbox" id="{{ cron }}_logging" name="{{ cron }}_logging" {% if details['logging_enabled'] %} checked {% endif %}>
																	</label>
																</td>
															</tr>
                            {% endfor %}
                            
														</tbody>
													</table>
												</form>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div></div>
			</div>

{% endblock %}
