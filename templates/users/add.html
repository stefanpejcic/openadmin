<!-- users/add.html -->
{% extends 'base.html' %}

{% block content %}


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" integrity="sha384-tViUnnbYAV00FLIhhi3v/dWt3Jxw4gZQcNoSCxCIFNJVCx7/D55/wXsrNIRANwdD" crossorigin="anonymous">
<div>
    <div x-data="{ showSection: false }" class="border-b border-gray-200 bg-gray-50 p-4 dark:border-gray-800 dark:bg-gray-950 sm:p-6 lg:p-8">
        <header>
            <div class="flex flex-col gap-2 text-center sm:flex-row sm:items-center sm:justify-between sm:text-start">
                <div class="grow">
                    <h1 id="title" class="mb-1 text-xl font-bold">Create User Account</h1>
                    <h2 id="subtitle" class="text-sm font-medium text-slate-500">Create new OpenPanel user account.</h2>
                </div>
                <div class="flex flex-none items-center justify-center gap-2 rounded-sm px-2 sm:justify-end sm:bg-transparent sm:px-0">
                    <a id="helpButton" @click="showSection = !showSection" class="relative inline-flex items-center justify-center rounded-md border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out cursor-pointer outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 dark:border-gray-800 dark:text-gray-50 dark:bg-gray-950 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600 sm:w-fit border-black bg-black text-white hover:bg-gray-800 sm:mt-0">
                        Need Help?
                    </a>
                </div>
            </div>
        <!-- Initially Hidden, Show on Click -->
        <div :class="{ 'md:flex': showSection }" class="hidden mt-8 w-full md:max-w-3xl md:items-stretch md:space-x-4">

            <div class="relative rounded-lg border p-6 text-left shadow-sm bg-white dark:bg-[#090E1A] border-gray-200 dark:border-gray-900 w-full md:w-7/12">
                <div class="inline-flex items-center justify-center rounded-md border border-gray-200 p-2 dark:border-gray-800">
                    ðŸ“„
                </div>
                <h3 class="mt-4 text-sm font-medium text-gray-900 dark:text-gray-50">
                    <a href="https://openpanel.com/docs/admin/accounts/users/#create-users" target="_blank" class="focus:outline-none">
                        <span class="absolute inset-0" aria-hidden="true"></span>Documentation
                    </a>
                </h3>
                <p class="text-sm text-gray-500 dark:text-gray-500">View documentation for User accounts</p>
            </div>

            <div class="hidden relative rounded-lg border p-6 text-left shadow-sm bg-white dark:bg-[#090E1A] border-gray-200 dark:border-gray-900 mt-4 w-full md:mt-0 md:w-5/12">
                <div class="inline-flex items-center justify-center rounded-md border border-gray-200 p-2 dark:border-gray-800">
                    ðŸ“¦
                </div>
                <h3 class="mt-4 text-sm font-medium text-gray-900 dark:text-gray-50">
                    <a href="#" class="focus:outline-none">
                        <span class="absolute inset-0" aria-hidden="true"></span>Models
                    </a>
                </h3>
                <p class="text-sm text-gray-500 dark:text-gray-500">Lorem ipsum dolor sit amet.</p>
            </div>
        </div>
    </header>
    </div>


<div id="collapseAddNewUser">
    <div id="create_user_form" class="sm:mx-auto sm:max-w-2xl" style="display:block;">
        <form id="userForm" class="mt-8">

<div x-data="{ serverType: 'current' }" class="hidden grid gap-4">

  <!-- Select for server type -->
  <div class="col-span-full">
    <label for="serverType" class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium">
      Select Server
    </label>
    <select x-model="serverType" id="serverType" name="serverType" 
      class="mt-2 block w-full rounded-md border border-gray-300 px-2.5 py-2 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50">
      <option value="current">{% if force_domain_value %}{{ force_domain_value }} ({{ public_ip }}){% else %}{{ public_ip }}{% endif %}</option>
      <option value="remote">remote server</option>
    </select>
  </div>


  <template x-if="serverType === 'remote'">
    <div class="flex items-center p-4 bg-gray-800"><svg class="shrink-0 w-4 h-4 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"></path></svg><div class="ms-3 text-sm font-medium text-white">{% if license_type != "Community" %}The remote server must have a fresh installation of Ubuntu 24.04.{% else %}This experimental feature is available on Enterprise edition only.{% endif %}</div></div>
  </template>

  <template x-if="serverType === 'remote'">
    {% if license_type != "Community" %}
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-6">

      <div class="col-span-full sm:col-span-3">
        <label for="slave" class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium">IP Address<span class="text-red-500 dark:text-red-500">*</span></label>
        <input type="text" name="slave" id="slave" placeholder="IPv4 address" 
          class="mt-2 block w-full rounded-md border border-gray-300 px-2.5 py-2 shadow-sm outline-none transition sm:text-sm
                 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500
                 focus:ring-2 focus:ring-blue-200 focus:border-blue-500 focus:dark:ring-blue-700/30 focus:dark:border-blue-700" />
      </div>

      <div class="col-span-full sm:col-span-3">
        <label for="ssh_key_path" class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium">SSH private key<span class="text-red-500 dark:text-red-500">*</span></label>
        <input type="text" name="ssh_key_path" id="ssh_key_path" placeholder="/root/some-key.rsa"
          class="mt-2 block w-full rounded-md border border-gray-300 px-2.5 py-2 shadow-sm outline-none transition sm:text-sm
                 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500
                 focus:ring-2 focus:ring-blue-200 focus:border-blue-500 focus:dark:ring-blue-700/30 focus:dark:border-blue-700" />
      </div>

    </div>
    {% endif %}
  </template>

  <div class="mx-auto my-3 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500 col-span-full">
    <div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div>
  </div>
</div>
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-6">
                <div class="col-span-full sm:col-span-3">
                    <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="admin_username">Username<span class="text-red-500 dark:text-red-500">*</span></label>
                    <div class="relative w-full mt-2">
                        <input
                            type="text"
                            class="relative block w-full appearance-none rounded-md border px-2.5 py-2 shadow-sm outline-none transition sm:text-sm border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-950 disabled:border-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:dark:border-gray-700 disabled:dark:bg-gray-800 disabled:dark:text-gray-500 file:-my-2 file:-ml-2.5 file:cursor-pointer file:rounded-l-[5px] file:rounded-r-none file:border-0 file:px-3 file:py-2 file:outline-none focus:outline-none disabled:pointer-events-none file:disabled:pointer-events-none file:border-solid file:border-gray-300 file:bg-gray-50 file:text-gray-500 file:hover:bg-gray-100 file:dark:border-gray-800 file:dark:bg-gray-950 file:hover:dark:bg-gray-900/20 file:disabled:dark:border-gray-700 file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] file:disabled:bg-gray-100 file:disabled:text-gray-500 file:disabled:dark:bg-gray-800 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 [&amp;::-webkit-search-cancel-button]:hidden [&amp;::-webkit-search-decoration]:hidden" min="3" max="20"  minlength="3" maxlength="20" name="admin_username" id="admin_username" pattern="[a-zA-Z0-9]{3,20}" title="Can only contain letters and numbers. 3 characters min. - 20 max." required="" autofocus placeholder="emma"
                        />
                    </div>
                </div>
                <div class="col-span-full sm:col-span-3">
                    <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="admin_email">Email address</label>
                    <div class="relative w-full mt-2">
                        <input
                            type="email"
                            class="relative block w-full appearance-none rounded-md border px-2.5 py-2 shadow-sm outline-none transition sm:text-sm border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-950 disabled:border-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:dark:border-gray-700 disabled:dark:bg-gray-800 disabled:dark:text-gray-500 file:-my-2 file:-ml-2.5 file:cursor-pointer file:rounded-l-[5px] file:rounded-r-none file:border-0 file:px-3 file:py-2 file:outline-none focus:outline-none disabled:pointer-events-none file:disabled:pointer-events-none file:border-solid file:border-gray-300 file:bg-gray-50 file:text-gray-500 file:hover:bg-gray-100 file:dark:border-gray-800 file:dark:bg-gray-950 file:hover:dark:bg-gray-900/20 file:disabled:dark:border-gray-700 file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] file:disabled:bg-gray-100 file:disabled:text-gray-500 file:disabled:dark:bg-gray-800 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 [&amp;::-webkit-search-cancel-button]:hidden [&amp;::-webkit-search-decoration]:hidden" name="admin_email" id="admin_email" autocomplete="email" placeholder="emma@company.com"/>
                            <span class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" title="Email login information to the user" data-bs-toggle="tooltip" data-bs-placement="top"><input class="m-0" name="send_email" type="checkbox">&nbsp; send email</span>
                    </div>
                </div>
                <div class="col-span-full">
                    <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="admin_password">Password<span class="text-red-500 dark:text-red-500">*</span></label>
                    <div class="relative w-full flex mt-2">
                        <input class="relative block w-full appearance-none border px-2.5 py-2 shadow-sm outline-none rounded-l transition sm:text-sm border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-950 disabled:border-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:dark:border-gray-700 disabled:dark:bg-gray-800 disabled:dark:text-gray-500 file:-my-2 file:-ml-2.5 file:cursor-pointer file:rounded-l-[5px] file:rounded-r-none file:border-0 file:px-3 file:py-2 file:outline-none focus:outline-none disabled:pointer-events-none file:disabled:pointer-events-none file:border-solid file:border-gray-300 file:bg-gray-50 file:text-gray-500 file:hover:bg-gray-100 file:dark:border-gray-800 file:dark:bg-gray-950 file:hover:dark:bg-gray-900/20 file:disabled:dark:border-gray-700 file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] file:disabled:bg-gray-100 file:disabled:text-gray-500 file:disabled:dark:bg-gray-800 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 [&amp;::-webkit-search-cancel-button]:hidden [&amp;::-webkit-search-decoration]:hidden" autocomplete="password" name="admin_password" id="admin_password" required minlength="6" maxlength="30" pattern="[^']{6,30}" title="Can not contain apostrophe. 6 characters min. - 30 max."
                        />
                                                        <div class="flex">
                                                            <button class="relative inline-flex items-center justify-center border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out cursor-pointer outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 dark:border-gray-800 dark:text-gray-50 dark:bg-gray-950 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600 sm:w-fit border-black bg-black text-white hover:bg-gray-800 sm:mt-0" type="button" id="generatePassword" tabindex="-1">Generate</button>
                                                            <button class="relative inline-flex items-center justify-center rounded-r border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out cursor-pointer outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 dark:border-gray-800 dark:text-gray-50 dark:bg-gray-950 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600 sm:w-fit border-black bg-black text-white hover:bg-gray-800 sm:mt-0" tabindex="-1" type="button" id="togglePassword">
                                                                <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24" style="margin:0;"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
                                                            </button>
                                                        </div>

                    </div>
                </div>


<div class="mx-auto w-full col-span-full" x-data="{ showDetails: false }">


    <span @click="showDetails = !showDetails" class="flex gap-1 text-xs text-gray-500 dark:text-gray-500 cursor-pointer hover:underline">
        <svg :class="{'rotate-90': showDetails}" class="w-4 h-4 mr-1 transition-transform duration-200 transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>Advanced</span>
    </span>

    <div x-show="showDetails" x-cloak class="pt-2 w-full block">


                <div class="mx-auto my-3 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500 col-span-full"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>



<div class="col-span-full">
    <div role="radiogroup" aria-required="false" dir="ltr" class="grid gap-2" tabindex="0" style="outline: none;">

<div x-data="{
  selectedWebserver: '{{ defaults.WEB_SERVER }}' || 'apache',
  varnishEnabled: {{ 'true' if defaults.VARNISH else 'false' }}
}" class="space-y-8">

<div class="flex justify-between items-center">
        <p class="text-sm font-semibold text-gray-900 dark:text-gray-50">Webserver</p>
  <p id="varnish" class="text-sm font-semibold text-gray-900 dark:text-gray-50">
    Enable Varnish Cache?
  <button
    type="button"
    @click="varnishEnabled = !varnishEnabled"
    :aria-checked="varnishEnabled"
    :class="varnishEnabled ? 'bg-indigo-600 dark:bg-indigo-600' : 'bg-gray-200 dark:bg-gray-950'"
    class="group relative isolate inline-flex shrink-0 cursor-pointer items-center rounded-full p-0.5 shadow-inner ring-1 ring-inset transition-all ring-black/5 dark:ring-gray-800 outline outline-offset-2 outline-0 focus-visible:outline-2 outline-indigo-500 dark:outline-indigo-500 h-5 w-9"
    role="switch"
    :aria-label="`Varnish Cache ${varnishEnabled ? 'enabled' : 'disabled'}`"
  >
    <span
      :class="varnishEnabled ? 'translate-x-4' : 'translate-x-0'"
      class="pointer-events-none relative inline-block transform appearance-none rounded-full border-none shadow-lg outline-none transition-all duration-150 ease-in-out bg-white dark:bg-gray-50 h-4 w-4"
    ></span>
  </button>
  </p>
</div>


  <!-- Web Server Selector -->
  <div>
    <div class="grid grid-cols-4 gap-4" role="radiogroup" aria-labelledby="webserver">
      {% set webservers = [
        {'value': 'apache', 'label': 'Apache'},
        {'value': 'nginx', 'label': 'Nginx'},
        {'value': 'openresty', 'label': 'OpenResty'},
        {'value': 'openlitespeed', 'label': 'Litespeed'}
      ] %}
      {% for ws in webservers %}
      <button
        type="button"
        role="radio"
        :aria-checked="selectedWebserver === '{{ ws.value }}' ? 'true' : 'false'"
        :data-state="selectedWebserver === '{{ ws.value }}' ? 'checked' : ''"
        @click="selectedWebserver = '{{ ws.value }}'"
        class="group relative w-full rounded-md border px-4 py-3 text-left shadow-sm transition focus:outline-none
               bg-white dark:bg-gray-950 border-gray-300 dark:border-gray-800
               data-[state=checked]:border-blue-500 data-[state=checked]:dark:border-blue-500
               data-[state=checked]:ring-2 data-[state=checked]:ring-blue-200 data-[state=checked]:dark:ring-blue-700/30"
      >
        <div class="flex items-center justify-center text-sm text-gray-900 dark:text-gray-50">
          <div class="flex items-center gap-2">
            {% if ws.value == 'apache' %}
<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" aria-label="Apache"><title>Apache</title><path fill="#D22128" d="M17.805 2.197v.066h.156v.44h.072v-.44h.156v-.066zm.9 0l-.175.353-.172-.353h-.087v.506h.067V2.3l.172.35h.045l.172-.35v.404h.066v-.506zm-4.257 1c-.204.31-.424.66-.66 1.06l-.04.062a44.457 44.457 0 00-1.265 2.29c-.187.36-.38.742-.577 1.146l2.267-.25c.66-.302.955-.578 1.242-.976a15.5 15.5 0 00.23-.342c.23-.363.46-.763.663-1.16.197-.386.37-.767.505-1.11.083-.22.15-.422.198-.6.042-.158.074-.307.1-.45-.884.15-1.965.295-2.668.33zM11.894 7.78l-.077.16c-.078.16-.157.32-.236.488-.086.18-.172.364-.26.552l-.132.287a75.265 75.265 0 00-1.427 3.3c-.163.397-.327.807-.493 1.23-.15.38-.297.765-.45 1.164l-.02.06c-.15.396-.3.802-.453 1.22l-.01.027.72-.08a.213.213 0 01-.042-.006c.863-.106 2.01-.75 2.75-1.547.342-.367.652-.8.94-1.306.213-.377.413-.795.604-1.258.168-.405.328-.843.48-1.318-.196.105-.423.18-.673.235a2.184 2.184 0 01-.273.046c.806-.31 1.314-.905 1.683-1.64a2.816 2.816 0 01-.968.428c-.06.012-.116.022-.174.03l-.043.006h.002c.278-.118.514-.248.718-.403a2.571 2.571 0 00.637-.698l.063-.104.077-.154a8.107 8.107 0 00.367-.85l.03-.088a3.04 3.04 0 00.123-.463.733.733 0 01-.094.065c-.243.145-.66.277-.996.34l.663-.074-.664.073h-.017l-.1.017c.006-.003.01-.006.017-.008l-2.265.25-.013.022zM8.27 16.45c-.117.323-.236.654-.355.992l-.005.015c-.016.046-.032.094-.05.142-.08.227-.15.432-.31.9.264.12.475.435.675.793a1.44 1.44 0 00-.466-.99c1.293.06 2.41-.27 2.99-1.217.05-.084.096-.173.14-.268-.26.333-.59.474-1.2.44 0 0-.004 0-.005.002l.004-.002c.9-.404 1.354-.79 1.754-1.433.094-.153.186-.32.28-.503-.788.81-1.702 1.04-2.664.865l-.72.078a6.43 6.43 0 00-.067.183zM15.42.112c-.376.222-1 .85-1.748 1.763l.686 1.294c.48-.687.97-1.307 1.462-1.836l.058-.062c-.02.02-.04.04-.057.062-.16.176-.644.74-1.375 1.863.703-.035 1.784-.18 2.666-.33.262-1.47-.258-2.142-.258-2.142s-.66-1.07-1.436-.61zm-3.084 6.402a40.253 40.253 0 011.306-2.26l.04-.064c.224-.352.45-.693.677-1.02l-.685-1.293-.157.192c-.197.245-.403.51-.613.79a39.853 39.853 0 00-2.016 2.97l-.022.038.893 1.763c.19-.378.38-.752.575-1.118zm-3.73 8.32c.158-.406.319-.81.483-1.225.156-.394.32-.79.484-1.19a91.133 91.133 0 011.6-3.604l.205-.424c.12-.243.237-.485.36-.724a.125.125 0 01.02-.04l-.895-1.763-.044.07c-.207.34-.414.687-.617 1.042a38.056 38.056 0 00-1.092 2.04l-.094.193a24.573 24.573 0 00-1.258 3.087 18.492 18.492 0 00-.52 1.997l.896 1.77c.117-.317.24-.638.364-.963zm-1.376-.476a13.38 13.38 0 00-.234 1.692c0 .02-.004.04-.005.06-.28-.45-1.03-.888-1.026-.884.537.778.944 1.55 1.005 2.31-.29.058-.684-.027-1.14-.195.475.436.83.556.97.588-.434.03-.89.328-1.346.67.668-.27 1.21-.38 1.596-.29-.61 1.74-1.23 3.655-1.843 5.69a.538.538 0 00.364-.354c.11-.368.84-2.786 1.978-5.965l.097-.27.028-.078c.12-.332.246-.672.374-1.02l.09-.237v-.004L7.24 14.3c-.003.02-.01.04-.012.06z"/></svg>
            {% elif ws.value == 'nginx' %}
<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" aria-label="NGINX"><title>NGINX</title><path fill="#009639" d="M12 0L1.605 6v12L12 24l10.395-6V6L12 0zm6 16.59c0 .705-.646 1.29-1.529 1.29-.631 0-1.351-.255-1.801-.81l-6-7.141v6.66c0 .721-.57 1.29-1.274 1.29H7.32c-.721 0-1.29-.6-1.29-1.29V7.41c0-.705.63-1.29 1.5-1.29.646 0 1.38.255 1.83.81l5.97 7.141V7.41c0-.721.6-1.29 1.29-1.29h.075c.72 0 1.29.6 1.29 1.29v9.18H18z"/></svg>
            {% elif ws.value == 'openresty' %}
<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" aria-label="OpenResty"><title>OpenResty</title><path fill="#7DC242" d="M12 0L1.75 6v12L12 24l10.25-6V6zm-1.775 18l1.08-4.657-2.428-2.397L13.79 6l-1.082 4.665 2.414 2.384z"/></svg>
            {% elif ws.value == 'openlitespeed' %}



<svg role="img" viewBox="0 0 257061 333334" xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" aria-label="OpenLitespeed" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd"><defs><style>.fil0{fill:#5e8cda}</style></defs><g id="Layer_x0020_1"><g id="litespeed.svg"><path class="fil0" d="M254635 161846l-76679-76621-32681 41400 35222 35222c3291 3233 3291 8545 0 11837l-10162 10162s6929 10278 7160 10971c1617 3118 1963 10567-2541 13973l-80086 61435v63110l159767-159652c3233-3291 3233-8545 0-11837z"/><path d="M76565 171488c-3233-3233-3233-8545 0-11779l10162-10220-6929-10047c-3349-4735-2309-11433 2310-14897l80143-61435V0h-115L2427 159709C873 161285 0 163413 0 165627c0 2215 873 4342 2427 5919l76679 76736 32681-41457-35222-35222v-115z" fill="#093071"/><path fill="#fff" d="M129917 222126l-37127 37069z"/><path class="fil0" d="M202554 38513c1039 0 2136 577 2598 1617 866 1732-289 3349-1386 4793l-70212 89035c-1039 1328-1155 3811-173 5197 0 0 37935 54853 39263 56758 1386 2079 1501 8199-1732 10740L58030 293263c-1617 1155-2541 1559-3637 1559-1039 0-2079-750-2483-1617-924-1732 231-3465 1328-4850l70154-89093c1039-1328 1155-3696 173-5081l-39090-56354c-2541-3580-1732-8661 1732-11259l112824-86610c1848-1443 2772-1617 3464-1617m0-1444c-1328 0-2598 578-4330 1906L85283 125413c-4042 3118-4966 9007-2021 13165l39148 56354c578 808 578 2483-115 3349l-70154 89266c-924 1155-2887 3695-1559 6352 693 1328 2194 2309 3696 2425 1732 0 3060-693 4619-1906l112824-86726c3926-2887 3926-9989 2078-12703-1328-1848-39263-56759-39263-56759-578-866-462-2598 173-3464l70270-88920c866-1155 2771-3580 1501-6351-751-1386-2310-2310-3926-2310l-58-289z"/><path d="M169757 196143c924 1386 1732 6582-577 8315L56356 291068c-981 808-1559 1155-1848 1155-404 0-115-693 924-2021l70154-89035c1732-2309 1906-6063 289-8372l-39148-56354s82107 58317 83030 59761v-57z" fill="#f5cd21"/><path d="M169757 196143l-38570-55431c-1617-2425-1501-6178 231-8430l70096-88978c1155-1386 1386-2078 1039-2078-289 0-924 346-1848 1155L87823 128991c-2194 1732-2714 5024-1039 7391l82972 59761z" fill="#fddd75"/></g></g><title>OpenLitespeed</title></svg>
            {% endif %}
            <span class="font-medium text-center">{{ ws.label }}</span>
          </div>
        </div>
      </button>
      {% endfor %}

    <input type="hidden" name="webserver" :value="varnishEnabled ? 'varnish+' + selectedWebserver : selectedWebserver">


    </div>
  </div>


</div>


    </div>
</div>

<div class="mx-auto my-3 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500 col-span-full"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>

<div class="col-span-full">
    <div role="radiogroup" aria-required="false" dir="ltr" class="grid gap-2" tabindex="0" style="outline: none;">
        <p class="text-sm font-semibold text-gray-900 dark:text-gray-50">Database type</p>

<div x-data="{ selectedSQL: '{{ defaults.MYSQL_TYPE or 'mysql' }}' }" class="col-span-full sm:col-span-3 mt-4">

  <div class="grid grid-cols-2 gap-4" role="radiogroup" aria-labelledby="sql_type">
    {% for option in ['mysql', 'mariadb'] %}
    {% set label = 'MySQL' if option == 'mysql' else 'MariaDB' %}
    <button
      type="button"
      role="radio"
      :aria-checked="selectedSQL === '{{ option }}' ? 'true' : 'false'"
      :data-state="selectedSQL === '{{ option }}' ? 'checked' : ''"
      @click="selectedSQL = '{{ option }}'"
      class="group relative w-full rounded-md border px-4 py-3 text-left shadow-sm transition focus:outline-none
             bg-white dark:bg-gray-950 border-gray-300 dark:border-gray-800
             data-[state=checked]:border-blue-500 data-[state=checked]:dark:border-blue-500
             data-[state=checked]:ring-2 data-[state=checked]:ring-blue-200 data-[state=checked]:dark:ring-blue-700/30"
    >
      <div class="flex items-center justify-center text-sm text-gray-900 dark:text-gray-50">
        <div class="group items-center gap-2">
          {% if option == 'mysql' %}
          <!-- Official MySQL Logo -->
<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-16 h-16" aria-label="MySQL"><title>MySQL</title><path fill="#003545" d="M16.405 5.501c-.115 0-.193.014-.274.033v.013h.014c.054.104.146.18.214.273.054.107.1.214.154.32l.014-.015c.094-.066.14-.172.14-.333-.04-.047-.046-.094-.08-.14-.04-.067-.126-.1-.18-.153zM5.77 18.695h-.927a50.854 50.854 0 00-.27-4.41h-.008l-1.41 4.41H2.45l-1.4-4.41h-.01a72.892 72.892 0 00-.195 4.41H0c.055-1.966.192-3.81.41-5.53h1.15l1.335 4.064h.008l1.347-4.064h1.095c.242 2.015.384 3.86.428 5.53zm4.017-4.08c-.378 2.045-.876 3.533-1.492 4.46-.482.716-1.01 1.073-1.583 1.073-.153 0-.34-.046-.566-.138v-.494c.11.017.24.026.386.026.268 0 .483-.075.647-.222.197-.18.295-.382.295-.605 0-.155-.077-.47-.23-.944L6.23 14.615h.91l.727 2.36c.164.536.233.91.205 1.123.4-1.064.678-2.227.835-3.483zm12.325 4.08h-2.63v-5.53h.885v4.85h1.745zm-3.32.135l-1.016-.5c.09-.076.177-.158.255-.25.433-.506.648-1.258.648-2.253 0-1.83-.718-2.746-2.155-2.746-.704 0-1.254.232-1.65.697-.43.508-.646 1.256-.646 2.245 0 .972.19 1.686.574 2.14.35.41.877.615 1.583.615.264 0 .506-.033.725-.098l1.325.772.36-.622zM15.5 17.588c-.225-.36-.337-.94-.337-1.736 0-1.393.424-2.09 1.27-2.09.443 0 .77.167.977.5.224.362.336.936.336 1.723 0 1.404-.424 2.108-1.27 2.108-.445 0-.77-.167-.978-.5zm-1.658-.425c0 .47-.172.856-.516 1.156-.344.3-.803.45-1.384.45-.543 0-1.064-.172-1.573-.515l.237-.476c.438.22.833.328 1.19.328.332 0 .593-.073.783-.22a.754.754 0 00.3-.615c0-.33-.23-.61-.648-.845-.388-.213-1.163-.657-1.163-.657-.422-.307-.632-.636-.632-1.177 0-.45.157-.81.47-1.085.315-.278.72-.415 1.22-.415.512 0 .98.136 1.4.41l-.213.476a2.726 2.726 0 00-1.064-.23c-.283 0-.502.068-.654.206a.685.685 0 00-.248.524c0 .328.234.61.666.85.393.215 1.187.67 1.187.67.433.305.648.63.648 1.168zm9.382-5.852c-.535-.014-.95.04-1.297.188-.1.04-.26.04-.274.167.055.053.063.14.11.214.08.134.218.313.346.407.14.11.28.216.427.31.26.16.555.255.81.416.145.094.293.213.44.313.073.05.12.14.214.172v-.02c-.046-.06-.06-.147-.105-.214-.067-.067-.134-.127-.2-.193a3.223 3.223 0 00-.695-.675c-.214-.146-.682-.35-.77-.595l-.013-.014c.146-.013.32-.066.46-.106.227-.06.435-.047.67-.106.106-.027.213-.06.32-.094v-.06c-.12-.12-.21-.283-.334-.395a8.867 8.867 0 00-1.104-.823c-.21-.134-.476-.22-.697-.334-.08-.04-.214-.06-.26-.127-.12-.146-.19-.34-.275-.514a17.69 17.69 0 01-.547-1.163c-.12-.262-.193-.523-.34-.763-.69-1.137-1.437-1.826-2.586-2.5-.247-.14-.543-.2-.856-.274-.167-.008-.334-.02-.5-.027-.11-.047-.216-.174-.31-.235-.38-.24-1.364-.76-1.644-.072-.18.434.267.862.422 1.082.115.153.26.328.34.5.047.116.06.235.107.356.106.294.207.622.347.897.073.14.153.287.247.413.054.073.146.107.167.227-.094.136-.1.334-.154.5-.24.757-.146 1.693.194 2.25.107.166.362.534.703.393.3-.12.234-.5.32-.835.02-.08.007-.133.048-.187v.015c.094.188.188.367.274.555.206.328.566.668.867.895.16.12.287.328.487.402v-.02h-.015c-.043-.058-.1-.086-.154-.133a3.445 3.445 0 01-.35-.4 8.76 8.76 0 01-.747-1.218c-.11-.21-.202-.436-.29-.643-.04-.08-.04-.2-.107-.24-.1.146-.247.273-.32.453-.127.288-.14.642-.188 1.01-.027.007-.014 0-.027.014-.214-.052-.287-.274-.367-.46-.2-.475-.233-1.238-.06-1.785.047-.14.247-.582.167-.716-.042-.127-.174-.2-.247-.303a2.478 2.478 0 01-.24-.427c-.16-.374-.24-.788-.414-1.162-.08-.173-.22-.354-.334-.513-.127-.18-.267-.307-.368-.52-.033-.073-.08-.194-.027-.274.014-.054.042-.075.094-.09.088-.072.335.022.422.062.247.1.455.194.662.334.094.066.195.193.315.226h.14c.214.047.455.014.655.073.355.114.675.28.962.46a5.953 5.953 0 012.085 2.286c.08.154.115.295.188.455.14.33.313.663.455.982.14.315.275.636.476.897.1.14.502.213.682.286.133.06.34.115.46.188.23.14.454.3.67.454.11.076.443.243.463.378z"/></svg>
          {% else %}
          <!-- Official MariaDB Logo -->
<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-16 h-16" aria-label="MariaDB"><title>MariaDB</title><path fill="#003545" d="M23.157 4.412c-.676.284-.79.31-1.673.372-.65.045-.757.057-1.212.209-.75.246-1.395.75-2.02 1.59-.296.398-1.249 1.913-1.249 1.988 0 .057-.65.998-.915 1.32-.574.713-1.08 1.079-2.14 1.59-.77.36-1.224.524-4.102 1.477-1.073.353-2.133.738-2.367.864-.852.449-1.515 1.036-2.203 1.938-1.003 1.32-.972 1.313-3.042.947a12.264 12.264 0 00-.675-.063c-.644-.05-1.023.044-1.332.334L0 17.193l.177.088c.094.05.353.234.561.398.215.17.461.347.55.391.088.044.17.088.183.101.012.013-.089.17-.228.353-.435.581-.593.871-.574 1.048.019.164.032.17.43.17.517-.006.826-.056 1.261-.208.65-.233 2.058-.94 2.784-1.4.776-.5 1.717-.998 1.956-1.042.082-.02.354-.07.594-.114.58-.107 1.464-.095 2.587.05.108.013.373.045.6.064.227.025.43.057.454.076.026.012.474.037.998.056.934.026 1.104.007 1.3-.189.126-.133.385-.631.498-.985.209-.643.417-.921.366-.492-.113.966-.322 1.692-.713 2.411-.259.499-.663 1.092-.934 1.395-.322.347-.315.36.088.315.619-.063 1.471-.397 2.096-.82.827-.562 1.647-1.691 2.19-3.03.107-.27.22-.22.183.083-.013.094-.038.315-.057.498l-.031.328.353-.202c.833-.48 1.414-1.262 2.127-2.884.227-.518.877-2.922 1.073-3.976a9.64 9.64 0 01.271-1.042c.127-.429.196-.555.48-.858.183-.19.625-.555.978-.808.72-.505.953-.75 1.187-1.205.208-.417.284-1.13.132-1.357-.132-.202-.284-.196-.763.006Z"/></svg>
          {% endif %}
          <span class="font-medium">{{ label }}{% if defaults.MYSQL_TYPE == option %} <span class="text-xs text-gray-500">(default)</span>{% endif %}</span>
        </div>
        
      </div>
    </button>

    <input type="radio" name="sql_type" value="{{ option }}" :checked="selectedSQL === '{{ option }}'" style="display: none;">
    {% endfor %}
  </div>
</div>



    </div>
</div>


</div>
</div>

<div class="mx-auto my-3 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500 col-span-full"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>




<div class="col-span-full">
    <div role="radiogroup" aria-required="false" dir="ltr" class="grid gap-2" tabindex="0" style="outline: none;">
        <p class="text-sm font-semibold text-gray-900 dark:text-gray-50">Select a package</p>

        <!-- Alpine.js state defined outside the loop -->
        <div x-data="{ selectedPlan: '{{ plans[0].name }}' }" class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-3">
            {% for plan in plans %}
            <button
                type="button"
                role="radio"
                :aria-checked="selectedPlan === '{{ plan.name }}' ? 'true' : 'false'"
                :data-state="selectedPlan === '{{ plan.name }}' ? 'checked' : ''"


                class="group relative w-full rounded-md border p-4 text-left shadow-sm transition focus:outline-none bg-white dark:bg-gray-950 border-gray-300 dark:border-gray-800 data-[state=checked]:border-blue-500 data-[state=checked]:dark:border-blue-500 flex flex-col items-start justify-start"



                @click="selectedPlan = '{{ plan.name }}'"
                id="{{ plan.id }}"
            >
                <div class="flex w-full flex-col justify-between">

<div class="flex gap-2 items-center">


                <div class="relative flex size-4 shrink-0 appearance-none items-center justify-center rounded-full border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900">
                    <template x-if="selectedPlan === '{{ plan.name }}'">
                        <div class="size-1.5 shrink-0 rounded-full bg-blue-500 dark:bg-white"></div>
                    </template>
                </div>

                    <div>
                        <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="{{ plan.id }}" aria-describedby="{{ plan.id }}-description">
                            {{ plan.name }}
                        </label>

<p title="Description: {{ plan.description }}"
  x-data='{"text": {{ plan.description | tojson | safe }}}' 
  x-text="text.length > 25 ? text.slice(0, 25) + '...' : text"
  class="mt-1 text-xs text-gray-500 dark:text-gray-500"
></p>

                    </div>


</div>

<div class="mx-auto my-1 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500 col-span-full"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>

                        <div>

<div class="flex items-center gap-4 mt-2 text-md text-gray-500 dark:text-gray-500">
  <p class="w-1/2 flex flex-col items-center text-sm" title="CPU Cores">
    <span class="icon icon-tabler text-lg flex gap-2">
        <i class="bi bi-cpu"></i>
        <span class="text-base font-medium">{{ 'âˆž' if plan.cpu == 0 or plan.cpu == '0' else plan.cpu }}</span>
    </span>
    <span>CPU</span>
  </p>
  <p class="w-1/2 flex flex-col items-center text-sm" title="Physical Memory (RAM)">
    <span class="icon icon-tabler text-lg flex gap-2">
        <i class="bi bi-memory"></i>
        <span class="text-base font-medium">{{ 'âˆž' if plan.ram|lower == '0g' or plan.ram == 0 else plan.ram }}</span>
    </span>
    <span>Memory</span>
  </p>
</div>


<div class="flex items-center gap-4 mt-2 text-md text-gray-500 dark:text-gray-500">
  <p class="w-1/2 flex flex-col items-center text-sm" title="Storage (Disk Space)">
    <span class="icon icon-tabler text-lg flex gap-2">
        <i class="bi bi-hdd"></i>
        <span class="text-base font-medium">{{ 'âˆž' if plan.disk_limit == '0 GB' else plan.disk_limit }}</span>
    </span>
    <span>Storage</span>
  </p>
  <p class="w-1/2 flex flex-col items-center text-sm" title="Inodes (Files Count)">
    <span class="icon icon-tabler text-lg flex gap-2">
        <i class="bi bi-hdd-stack"></i>
        <span class="text-base font-medium">
{{ 'âˆž' if plan.inodes_limit == 0 else
    ('{:.1f}M'.format(plan.inodes_limit / 1_000_000) if plan.inodes_limit >= 1_000_000
     else plan.inodes_limit) }}
        </span>
    </span>
    <span>Inodes</span>
  </p>
</div>


<div class="mx-auto my-1 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500 col-span-full"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>


<div class="items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-500" x-data="{ showDetails: false }">
    <span @click="showDetails = !showDetails" class="flex gap-1 text-xs text-gray-500 dark:text-gray-500 cursor-pointer hover:underline">
        <svg :class="{'rotate-90': showDetails}" class="w-4 h-4 mr-1 transition-transform duration-200 transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>View all limits</span>
    </span>

    <div x-show="showDetails">
        <p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
        {{ 'âˆž' if plan.bandwidth == 0 else plan.bandwidth }} Mbps
        </p>

        <p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
        {{ 'âˆž' if plan.domains_limit == 0 else plan.domains_limit }} Domains
        </p>

        <p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
        {{ 'âˆž' if plan.websites_limit == 0 else plan.websites_limit }} Websites
        </p>

        <p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
        {{ 'âˆž' if plan.email_limit == 0 else plan.email_limit }} Email accounts
        </p>

        <p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
        {{ 'âˆž' if plan.ftp_limit == 0 else plan.ftp_limit }} FTP accounts
        </p>

        <p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
        {{ 'âˆž' if plan.db_limit == 0 else plan.db_limit }} Databases
        </p>
    </div>
</div>


                        </div>
                </div>


            </button>

            <input
                type="radio"
                value="{{ plan.name }}"
                name="plan_name"
                :checked="selectedPlan === '{{ plan.name }}'"
                style="display: none;"
            />
            {% endfor %}
        </div>

    </div>
</div>



            </div>


            <div class="mx-auto my-3 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>



            <div class="flex items-center justify-end space-x-4">
                <a href="/users" class="relative inline-flex items-center justify-center whitespace-nowrap rounded-md border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out disabled:pointer-events-none disabled:shadow-none outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 bg-white dark:bg-gray-950 hover:bg-gray-50 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600">Go back</a>

<div id="tooltip-community-limit-reached" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-xs opacity-0 tooltip dark:bg-gray-700">
    OpenPanel Community edition has a limit of 3 user accounts. Remove account or upgrade to Enterprise
    <div class="tooltip-arrow" data-popper-arrow></div>
</div>

<div id="tooltip-demo" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-xs opacity-0 tooltip dark:bg-gray-700">
    This action is disabled in demo mode.
    <div class="tooltip-arrow" data-popper-arrow></div>
</div>

                <button type="button" class="relative inline-flex items-center justify-center whitespace-nowrap rounded-md border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out disabled:pointer-events-none disabled:shadow-none outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 border-transparent text-white dark:text-white bg-blue-500 dark:bg-blue-500 hover:bg-blue-600 dark:hover:bg-blue-600 disabled:bg-blue-300 disabled:text-white disabled:dark:bg-blue-800 disabled:dark:text-blue-400" id="CreateUserButton" {% if users | length >= 3 and license_type == "Community" %}data-tooltip-target="tooltip-community-limit-reached"{% endif %}>Create User</button>
            </div>
        </form>
    </div>
</div>


<div id="scrollinglogAreaDiv" class="hidden mt-2 card shadow-lg CrawlerStatusCard" style="overflow-y: auto;">
    <div class="overflow-auto flex flex-col-reverse p-4">
        <div class="flex items-center p-4 rounded-lg bg-gray-50 dark:bg-gray-800 w-full">
            <span id="statusMessage" class="w-full"></span>
        </div>
    </div>
</div>


</div>


<script src="{{ url_for('static', filename='pages/users_add.js') }}?v=0.54" defer></script>

<style>

.grid-cols-3 {
    grid-template-columns: repeat(3, minmax(0, 1fr));
}



.rotate-90 {
  transform: rotate(90deg);
  transition: transform 0.3s ease;
}

@keyframes rotate {
    to {
        --angle: 360deg
    }
}

@property --angle {
    syntax: "<angle>";
    initial-value: 0deg;
    inherits: false
}

.CrawlerStatusCard.active {
    animation: rotate 2s linear infinite;
    border: 2px solid transparent;
    border-image: conic-gradient(from var(--angle),transparent 0deg 90deg,transparent 90deg 180deg,transparent 180deg 270deg,#0077bc 270deg 1turn) 1 stretch;
}
  </style>
  
{% endblock %}
