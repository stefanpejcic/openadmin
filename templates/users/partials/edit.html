               <!-- EDIT -->
               <div x-show="activeTab === 'edit'" class="p-4" x-cloak>
                  <form action="/user/edit/{{ user.username.split('_')[-1] }}" method="POST">
                     <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                     <div id="collapseAddNewUser">
                        <div id="create_user_form" class="sm:mx-auto sm:max-w-4xl">
                  <form id="userForm" class="mt-8">
                  <div class="grid grid-cols-1 gap-4 sm:grid-cols-6">
                  <div class="col-span-full sm:col-span-3">
                  <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="admin_username">Username</label>
                  <div class="relative w-full mt-2">
                  <input
                     type="text"
                     class="relative block w-full appearance-none rounded-md border px-2.5 py-2 shadow-sm outline-none transition sm:text-sm border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-950 disabled:border-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:dark:border-gray-700 disabled:dark:bg-gray-800 disabled:dark:text-gray-500 file:-my-2 file:-ml-2.5 file:cursor-pointer file:rounded-l-[5px] file:rounded-r-none file:border-0 file:px-3 file:py-2 file:outline-none focus:outline-none disabled:pointer-events-none file:disabled:pointer-events-none file:border-solid file:border-gray-300 file:bg-gray-50 file:text-gray-500 file:hover:bg-gray-100 file:dark:border-gray-800 file:dark:bg-gray-950 file:hover:dark:bg-gray-900/20 file:disabled:dark:border-gray-700 file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] file:disabled:bg-gray-100 file:disabled:text-gray-500 file:disabled:dark:bg-gray-800 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 [&amp;::-webkit-search-cancel-button]:hidden [&amp;::-webkit-search-decoration]:hidden" min="3" max="20"  minlength="3" maxlength="20" pattern="[a-zA-Z0-9]{3,20}" title="Can only contain letters and numbers. 3 characters min. - 20 max." name="new_username" placeholder="Username" value="{{ user.username.split('_')[-1] }}"/>
                  </div>
                  </div>
                  <div class="col-span-full sm:col-span-3">
                  <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="admin_email">Email address</label>
                  <div class="relative w-full mt-2">
                  <input
                  type="email" 
                  class="relative block w-full appearance-none rounded-md border px-2.5 py-2 shadow-sm outline-none transition sm:text-sm border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-950 disabled:border-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:dark:border-gray-700 disabled:dark:bg-gray-800 disabled:dark:text-gray-500 file:-my-2 file:-ml-2.5 file:cursor-pointer file:rounded-l-[5px] file:rounded-r-none file:border-0 file:px-3 file:py-2 file:outline-none focus:outline-none disabled:pointer-events-none file:disabled:pointer-events-none file:border-solid file:border-gray-300 file:bg-gray-50 file:text-gray-500 file:hover:bg-gray-100 file:dark:border-gray-800 file:dark:bg-gray-950 file:hover:dark:bg-gray-900/20 file:disabled:dark:border-gray-700 file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] file:disabled:bg-gray-100 file:disabled:text-gray-500 file:disabled:dark:bg-gray-800 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 [&amp;::-webkit-search-cancel-button]:hidden [&amp;::-webkit-search-decoration]:hidden" autocomplete="email" name="new_email" placeholder="some-email@example.com" autocomplete="off" value="{{ user.email }}"
                  </div>
                  </div>
                  </div>
                  <div x-data="passwordManager()" class="col-span-full">
                  <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="admin_password">Password
                  </label>
                  <div class="relative w-full flex mt-2">
                  <input 
                     x-ref="passwordInput" 
                     x-bind:type="passwordVisible ? 'text' : 'password'" 
                     x-model="password" 
                     class="relative block w-full appearance-none border px-2.5 py-2 shadow-sm outline-none rounded-l transition sm:text-sm border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-950 disabled:border-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:dark:border-gray-700 disabled:dark:bg-gray-800 disabled:dark:text-gray-500 file:-my-2 file:-ml-2.5 file:cursor-pointer file:rounded-l-[5px] file:rounded-r-none file:border-0 file:px-3 file:py-2 file:outline-none focus:outline-none disabled:pointer-events-none file:disabled:pointer-events-none file:border-solid file:border-gray-300 file:bg-gray-50 file:text-gray-500 file:hover:bg-gray-100 file:dark:border-gray-800 file:dark:bg-gray-950 file:hover:dark:bg-gray-900/20 file:disabled:dark:border-gray-700 file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] file:disabled:bg-gray-100 file:disabled:text-gray-500 file:disabled:dark:bg-gray-800 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 [&amp;::-webkit-search-cancel-button]:hidden [&amp;::-webkit-search-decoration]:hidden"
                     autocomplete="password" 
                     name="new_password" 
                     minlength="6" 
                     maxlength="30" 
                     pattern="[^']{6,30}" 
                     title="Can not contain apostrophe. 6 characters min. - 30 max." 
                     placeholder="unchanged if empty"
                     />
                  <div class="flex">
                  <button 
                     @click="generatePassword()" 
                     class="relative inline-flex items-center justify-center border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out cursor-pointer outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 dark:border-gray-800 dark:text-gray-50 dark:bg-gray-950 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600 sm:w-fit border-black bg-black text-white hover:bg-gray-800 sm:mt-0" 
                     type="button" 
                     id="generatePassword" 
                     tabindex="-1"
                     >
                  Generate
                  </button>
                  <button 
                     @click="togglePasswordVisibility()" 
                     class="relative inline-flex items-center justify-center rounded-r border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out cursor-pointer outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 dark:border-gray-800 dark:text-gray-50 dark:bg-gray-950 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600 sm:w-fit border-black bg-black text-white hover:bg-gray-800 sm:mt-0" 
                     tabindex="-1" 
                     type="button" 
                     id="togglePassword"
                     >
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" style="margin:0;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-eye">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
                  <path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" />
                  </svg>
                  </button>
                  </div>
                  </div>
                  </div>


                <script>
                    function passwordManager() {
                        return {
                            password: '',
                            passwordVisible: false,
                            generatePassword() {
                                const charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
                                let result = "";
                                for (let i = 0; i < 16; i++) {
                                    const randomIndex = Math.floor(Math.random() * charset.length);
                                    result += charset.charAt(randomIndex);
                                }
                                this.password = result;
                                this.passwordVisible = true;  // Make password visible immediately after generating
                                this.$nextTick(() => {
                                    this.$refs.passwordInput.focus();
                                });
                            },
                            togglePasswordVisibility() {
                                this.passwordVisible = !this.passwordVisible;
                            }
                        };
                    }
                </script>



                  <div class="mx-auto my-6 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500 col-span-full"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>
                  <div class="col-span-full sm:col-span-3">
                  <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="new_ip">IP address</label>
                  <div class="relative w-full mt-2">
                  <select class="group/trigger flex w-full select-none items-center justify-between gap-2 truncate rounded-md border px-3 py-2 shadow-sm outline-none transition sm:text-sm border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 data-[placeholder]:text-gray-500 data-[placeholder]:dark:text-gray-500 bg-white dark:bg-gray-950 hover:bg-gray-50 hover:dark:bg-gray-950/50 data-[disabled]:bg-gray-100 data-[disabled]:text-gray-400 data-[disabled]:dark:border-gray-700 data-[disabled]:dark:bg-gray-800 data-[disabled]:dark:text-gray-500 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 mt-2" id="ipSelect" name="new_ip">
                  <option disabled value="">Change IP address</option>
                  </select>
                  </div>
                  </div>
                  <div class="hidden col-span-full sm:col-span-3">
                  <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="size">MySQL type</label>
                  <select class="group/trigger flex w-full select-none items-center justify-between gap-2 truncate rounded-md border px-3 py-2 shadow-sm outline-none transition sm:text-sm border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 data-[placeholder]:text-gray-500 data-[placeholder]:dark:text-gray-500 bg-white dark:bg-gray-950 hover:bg-gray-50 hover:dark:bg-gray-950/50 data-[disabled]:bg-gray-100 data-[disabled]:text-gray-400 data-[disabled]:dark:border-gray-700 data-[disabled]:dark:bg-gray-800 data-[disabled]:dark:text-gray-500 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 mt-2" name="sql_type" id="sql_type">
                  <option disabled selected value> -- select sql server -- </option>
                  <option value="mysql">MySQL</option>
                  <option value="mariadb">MariaDB</option>
                  </select>
                  </div>
                  <div class="mx-auto my-6 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500 col-span-full"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>
                  <div class="col-span-full">
                  <div role="radiogroup" aria-required="false" dir="ltr" class="grid gap-2" tabindex="0" style="outline: none;">
                  <p class="text-sm font-semibold text-gray-900 dark:text-gray-50">Select a package</p>
                  <div x-data="{ selectedPlan: '{{ user.plan_id }}' }" class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-3">
                  {% for plan in plans %}
                  <button type="button" role="radio" 
                     :aria-checked="selectedPlan === '{{ plan.id }}' ? 'true' : 'false'" 
                     :data-state="selectedPlan === '{{ plan.id }}' ? 'checked' : ''" 
                     value="{{ plan.name }}" 
                     class="group relative w-full rounded-md border p-4 text-left shadow-sm transition focus:outline-none bg-white dark:bg-gray-950 border-gray-300 dark:border-gray-800 data-[state=checked]:border-blue-500 data-[state=checked]:dark:border-blue-500 data-[disabled]:border-gray-100 data-[disabled]:dark:border-gray-800 data-[disabled]:bg-gray-50 data-[disabled]:shadow-none data-[disabled]:dark:bg-gray-900 focus:ring-2 focus:ring-blue-200 focus:dark:ring-blue-700/30 focus:border-blue-500 focus:dark:border-blue-700 flex items-start justify-between" 
                     :id="plan.id" tabindex="0"
                     @click="selectedPlan = '{{ plan.id }}'">
                  <div x-show="'{{ plan.id }}' === '{{ user.plan_id }}'" class="absolute -top-3 flex"><span class="inline-flex items-center rounded-full bg-gray-300 text-black text-xs font-semibold py-1 px-3">Current Plan</span></div>
                  <div class="flex w-full flex-col justify-between">
                  <div>
                  <label class="text-sm leading-none text-gray-900 dark:text-gray-50 font-medium" for="{{ plan.id }}" aria-describedby="{{ plan.id }}-description">
                  {{ plan.name }}
                  </label>
                  <p class="mt-1 text-sm text-gray-500 dark:text-gray-500">{{ plan.description }}</p>
                  </div>
                  <div class="mt-4" x-data="{ showDetails: false }">
                  <span @click="showDetails = !showDetails" class="text-sm font-medium text-gray-900 dark:text-gray-50">Display Limits</span>
                  <span :class="{ 'hidden': !showDetails }">

<p class="mt-6 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.cpu == 0 or plan.cpu == '0' else plan.cpu }} Cores
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.ram|lower == '0g' or plan.ram == 0 else plan.ram }} Memory
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.disk_limit == '0 GB' else plan.disk_limit }} Storage
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.inodes_limit == 0 else plan.inodes_limit }} Inodes
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.bandwidth == 0 else plan.bandwidth }} Mbps
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.domains_limit == 0 else plan.domains_limit }} Domains
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.websites_limit == 0 else plan.websites_limit }} Websites
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.email_limit == 0 else plan.email_limit }} Email accounts
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.ftp_limit == 0 else plan.ftp_limit }} FTP accounts
</p>

<p class="mt-1 text-xs text-gray-500 dark:text-gray-500">
  {{ '∞' if plan.db_limit == 0 else plan.db_limit }} MySQL Databases
</p>
                  </span>
                  </div>
                  </div>
                  <div class="relative flex size-4 shrink-0 appearance-none items-center justify-center rounded-full border shadow-sm border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-950 group-data-[state=checked]:border-0 group-data-[state=checked]:border-transparent group-data-[state=checked]:bg-blue-500 group-data-[disabled]:border-gray-300 group-data-[disabled]:bg-gray-100 group-data-[disabled]:text-gray-400 group-data-[disabled]:dark:border-gray-700 group-data-[disabled]:dark:bg-gray-800 outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500">
                  <span x-show="selectedPlan === '{{ plan.id }}'" class="flex items-center justify-center">
                  <div class="size size-1.5 shrink-0 rounded-full bg-white group-data-[disabled]:bg-gray-400 group-data-[disabled]:dark:bg-gray-500"></div>
                  </span>
                  </div>
                  </button>
                  <!-- Hidden radio input to track the selected plan -->
                  <input type="radio" value="{{ plan.id }}" aria-hidden="true" style="transform: translateX(-100%); position: absolute; pointer-events: none; opacity: 0; margin: 0px; width: 213.328px; height: 146px;" tabindex="-1" name="plan_id" :checked="selectedPlan === '{{ plan.id }}'" />
                  {% endfor %}
                  </div>
                  </div>
                  </div>
                  </div>
                  <div class="mx-auto my-6 flex w-full items-center justify-between gap-3 text-sm text-gray-500 dark:text-gray-500"><div class="h-[1px] w-full bg-gray-200 dark:bg-gray-800"></div></div>
                  <div class="flex items-center justify-end space-x-4">
                  <a href="/users" class="relative inline-flex items-center justify-center whitespace-nowrap rounded-md border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out disabled:pointer-events-none disabled:shadow-none outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 border-gray-300 dark:border-gray-800 text-gray-900 dark:text-gray-50 bg-white dark:bg-gray-950 hover:bg-gray-50 dark:hover:bg-gray-900/60 disabled:text-gray-400 disabled:dark:text-gray-600">Go back</a>
                  <button type="submit" class="relative inline-flex items-center justify-center whitespace-nowrap rounded-md border px-3 py-2 text-center text-sm font-medium shadow-sm transition-all duration-100 ease-in-out disabled:pointer-events-none disabled:shadow-none outline outline-offset-2 outline-0 focus-visible:outline-2 outline-blue-500 dark:outline-blue-500 border-transparent text-white dark:text-white bg-blue-500 dark:bg-blue-500 hover:bg-blue-600 dark:hover:bg-blue-600 disabled:bg-blue-300 disabled:text-white disabled:dark:bg-blue-800 disabled:dark:text-blue-400">Save</button>
                  </div>
                  </form>
                  </div>
               </div>
               </form>
            </div>
            <!-- END EDIT -->
